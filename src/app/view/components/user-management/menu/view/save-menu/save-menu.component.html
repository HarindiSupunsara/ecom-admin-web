<div [hidden]="!loading" class="loader">
    <h5>Loading...</h5>
    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
</div>
<div class="content-container" [ngClass]="{'disabled': loading == true}">
    <mat-card class="main-card">
        <mat-card-header>
            <mat-card-title>MENU</mat-card-title>
            <mat-card-subtitle>{{screenName}}</mat-card-subtitle>
            <span class="spacer"></span>
        </mat-card-header>
        <mat-card-content>
            <form [formGroup]="menuForm" (ngSubmit)="save()">
                <div fxLayout="row" fxLayout.sm="row" fxLayout.xs="column" fxLayoutWrap fxLayoutAlign="right">
                    <div fxFlex="50" class="padding-right-5">
                        <mat-form-field class="full-width">
                            <input type="input" matInput formControlName="name" placeholder="Name">
                            <mat-error *ngIf="Name?.touched && Name?.invalid && Name?.errors?.['required']">
                                Name is
                                <strong>required</strong>
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div fxFlex="50">
                        <mat-form-field class="full-width">
                            <mat-label>Parent Menu</mat-label>
                            <mat-select formControlName="parentMenu">
                                <mat-option *ngFor="let pm of parentMenuList" [value]="pm.id">{{pm.name}}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </div>
                <div fxLayout="row" fxLayout.sm="row" fxLayout.xs="column" fxLayoutWrap fxLayoutAlign="right">
                    <div fxFlex="50" class="main-table-scroll">
                        <mat-selection-list formControlName="permission">
                            <mat-list-option *ngFor="let perm of permissionList" [value]="perm.id" (click)="toggleAllSelection(perm.id)">
                                {{perm.name}}
                            </mat-list-option>
                        </mat-selection-list>
                    </div>
                </div>
                <div class="card-footer">
                    <button mat-raised-button class="btn-primary" matTooltip="Save" type="submit">Save</button>
                </div>
            </form>
        </mat-card-content>

        <!-- <mat-card-actions>
            <div class="card-footer">
                <button mat-raised-button class="btn-primary" (click)="save()" matTooltip="Save">Save</button>
            </div>
        </mat-card-actions> -->


    </mat-card>
</div>